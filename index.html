<!--
    This is my rendition of the rock paper scissors assignments 
    within the Odin Project made from CSS Javascript and HTML

    Author: Kyle Gruen
    Date: 10-26-2022
-->

<!DOCTYPE html>

<html lang="en">

<!-- Gives webpage the information for background use -->

<head>
    <!-- Sets special character use within program -->
    <meta charset="UTF-8">

    <!-- Sets the webpages title -->
    <title>Etch-a-Sketch</title>

    <!--Links CSS File to Index-->
    <link rel="stylesheet" href="homepage.css">

    <!--Links to JS File to Index-->
</head>

<body>

    <div class="header">
        <h1>Etch-a-Sketch</h1>
        <div class="button-container">
            <form action="#">
                <select id="sizes" onchange="setGameSize()">sizes
                    <option value="4">4x4</option>
                    <option value="8">8x8</option>
                    <option value="16">16x16</option>
                </select>
            </form>
            <button class="black" onclick="black()">Black</button>
            <button class="rainbow" onclick="rainbow()">Rainbow</button>
            <button class="reset">Reset</button>

        </div>
    </div>
    <div class="center-container">
    </div>


    <script>

        const resetButton = document.querySelector(".reset");
        const colors = ['red', 'blue', 'green', 'yellow', 'violet', 'teal'];

        resetButton.addEventListener('click', () => {
            console.log("reset game");
            setGameSize();
        })

        function setGameSize() {
            reset();

            let myList = document.getElementById("sizes");
            gridContainer(myList.options[myList.selectedIndex].value);
        }

        function gridContainer(size) {

            const grid = document.querySelector(".center-container");
            grid.style.gridTemplateColumns = `repeat(${size}, 1fr)`;
            grid.style.gridTemplateRows = `repeat(${size}, 1fr)`;

            for (let count = 0; count < size * size; count++) {
                const newDiv = document.createElement('div');
                newDiv.classList.add("square");
                grid.appendChild(newDiv);
            }
        }

        function changeColor(e) {
            e.target.style.backgroundColor = "black";
        }

        function changeRainbow(e) {
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            e.target.style.backgroundColor = randomColor;
        }

        function reset() {
            let allBoxes = document.querySelector(".center-container");
            while (allBoxes.hasChildNodes()) {
                allBoxes.removeChild(allBoxes.firstChild);
            }
        }

        gridContainer(4);

        function black() {
            let gridBoxList = document.querySelectorAll(".center-container");
            gridBoxList.forEach(gridBox => { gridBox.addEventListener("mouseover", changeColor) });
        }

        function rainbow() {
            let styleList = document.querySelectorAll(".center-container");
            styleList.forEach(gridChoice => { gridChoice.addEventListener("mouseover", changeRainbow) });
        }

    </script>
</body>